<div class="flex align-items-center justify-content-end gap-12">
    <div class="container-search">
        <input [(ngModel)]="searchTerm" (input)="handleSearch()"  type="text" class="search" placeholder="search ">
    </div>
    <div>
        <mat-button-toggle-group
            appearance="legacy"
            name="view"
            aria-label="view"
            (change)="onViewChange($event)"
            [(value)]="selectedView"
            class="p-y-6"
        >
            <mat-button-toggle value="table">Table</mat-button-toggle>
            <mat-button-toggle value="card">Card</mat-button-toggle>
        </mat-button-toggle-group>
    </div>
</div>
@if (isLoading ) {
    <div class="container-loader">
        <div class="loader"></div>
    </div>
} @else {

    @if (selectedView == 'table' ) {
        <mtx-grid [data]="cars"
        [columns]="columns"
        [loading]="isLoading"
        [columnResizable]="columnResizable"
        [multiSelectable]="multiSelectable"
        [rowSelectable]="rowSelectable"
        [hideRowSelectionCheckbox]="hideRowSelectionCheckbox"
        [rowHover]="rowHover"
        [rowStriped]="rowStriped"
        [showToolbar]="showToolbar"
        [toolbarTitle]="'Data Grid Toolbar'"
        [columnHideable]="columnHideable"
        [columnSortable]="columnSortable"
        [columnPinnable]="columnPinnable"
        [expandable]="expandable"
        [expansionTemplate]="expansionTpl"
        [pageOnFront]="false"
        [showPaginator]="showPaginator"
        [pageSizeOptions]="[5,10,50,100]"
        [pageIndex]="filters.curentPage"
        [pageSize]="filters.rows"
        [length]="totalRecords"
        (page)="handelPagination($event)"
        [rowSelectable]="ListRowSelectable"

        >
        </mtx-grid>
        <ng-template #expansionTpl let-row>
            {{row.name}}
        </ng-template> 
    } @else {
        <div class="flex flex-wrap">
            @for (car of cars; track car) {
                <div class="col-3 ">
                    <mat-card class="" >
                        <img mat-card-image [src]="'https://tse1.mm.bing.net/th?id=OIP.TY_X02iLeW6aVmJXTVO6PgHaEK&pid=Api&P=0&h=180'" alt="test">
                        <mat-card-content>
                            <div class="flex justify-content-between">
                                <p>{{ car.name }} test</p>
                                <p>{{ car.price}}</p>
                            </div>
                        </mat-card-content>
                        <mat-card-actions>
                            <button mat-button >Mettre à jour</button>
                            <button mat-button color="warn" >Supprimer</button>
                            <button mat-button>Détails</button>
                        </mat-card-actions>
                    </mat-card>
                </div>
            }
        </div>
    }

}